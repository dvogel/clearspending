{% extends "base.html" %}
{% block scripts %}
    {{ block.super }}
    <script src="{{ STATIC_URL }}scripts/d3.v2.js"></script>
    <script src="{{ STATIC_URL }}scripts/charts.js"></script>
    <style type="text/css">
        .cell {
            position: absolute;
            border: solid 1px white;
            font: 8.9px sans-serif;
            line-height: 10px;
            overflow: hidden;
            position: absolute;
            text-indent: 2px;
        }
        .cell.unknown {
        }
        .cell.category {
            display: none;
        }
        div.chart-loading {
            position: absolute;
            width: 100%;
            top: 50%;
            height: 48px;
            margin-top: -24px;
            font-weight: bold;
            color: #6C6764;
            font-size: 24px;
            vertical-align: middle;
            text-align: center;
        }
        div.chart-loading div {
            display: inline-block;
            margin: 0 auto;
        }
        #chart-con {
            position: relative;
            width: 840px;
            margin: auto auto;
        }
        #status-con {
            position: relative;
            width: 840px;
            height: 3em;
        }
        #status, #program-description {
            font-weight: bold;
        }
        #program-description {
            display: none;
        }
        #legend {
            display: block;
            vertical-align: top;
            float: right;
            background: none rgb(255, 255, 255);
            border-radius: 7px;
            -moz-border-radius: 7px;
            border-color: black;
            border-width: 1px;
            border-style: solid;
            padding: 1em;
            margin: 0 1em 1em 1em;
        }
        span.swatch {
            display: inline-block;
            width: 1em;
            height: 1em;
            overflow: hidden;
        }
        .perfect {
            background: none rgb(0, 200, 0);
        }
        .fail {
            background: none rgb(240, 59, 32);
        }
        .pass {
            background: none rgb(255, 237, 160);
            background: none #faca2c;
        }
        .blind {
            background: none rgb(0, 0, 0);
        }
        div#chart-buttons {
            float: right;
        }
        span.fiscal_year_chooser {
            text-align: right;
            color: #68A31D;
            margin: 0 0.5em;
            cursor: pointer;
        }
        span.fiscal_year_chooser:hover {
        }
        span.fiscal_year_chooser.selected {
            color: #68A31D;
            font-weight: bold;
        }
        span.title {
            display: inline;
            float: left;
            font-weight: bold;
            font-size: 14px;
        }
    </style>
{% endblock %}
{% block bodyclass %}consistency{% endblock bodyclass %}
{% block content %}
<div id="pageMain">

    <p>
    The federal government reports a portion of it's spending in two ways. The Catalog of Federal Domestic Assistance (CFDA) reports estimates for each federal spending program for the current fiscal year and actual expenditures for two previous years. USASpending.gov provides an interface to the Federal Assistance Award Data System (FAADS). If agencies are properly reporting their spending to the FAADS system, the aggregate spending reported for each program should be consistent with the CFDA data. Unfotunately it's not.
    </p>

    <div id="chart-con">
        <span class="title">Consistency of Federal Direct Assistance Reporting</span>
        <div id="chart-buttons">
            {% for fy in FISCAL_YEARS %}
            <span class="fiscal_year_chooser">{{ fy }}</span>
            {% endfor %}
        </div>

        <div class="clear"></div>

        <div id="chart">
        </div>

        <div class="clear"></div>
        <div id="status-con">
            <div id="status">
                Move your cursor over the diagram for details on each federal spending program.
            </div>
            <div id="program-description">
            </div>
        </div>
    </div>
        <div class="clear"></div>


    <div id="legend">
        <span id="legend-title">Legend</span> <br>
        <span class="swatch blind" id="blind-swatch">&nbsp;</span> Non-reporting programs <br>
        <span class="swatch fail" id="bad-swatch">&nbsp;</span> Failing programs <br>
        <span class="swatch pass" id="ok-swatch">&nbsp;</span> Passing programs <br>
        <span class="swatch perfect" id="perfect-swatch">&nbsp;</span> Best programs <br>
    </div>

    <p>
    In the diagram you can see a rectangle for each spending program, sized relative to the amount of spending it represents. The black area represents programs that completely fail to report their spending to the FAADS. The yellow area represents programs for which the deviation between the CFDA and the FAADS is less than 50%, while programs with more than a 50% deviation represented by red.
    </p>

</div>
{% endblock %}

